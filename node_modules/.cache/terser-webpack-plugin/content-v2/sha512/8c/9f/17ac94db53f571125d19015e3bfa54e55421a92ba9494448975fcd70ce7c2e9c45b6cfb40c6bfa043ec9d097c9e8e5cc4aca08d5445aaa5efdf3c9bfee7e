{"code":"!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"\",s(s.s=0)}([function(e,t,s){\"use strict\";s.r(t);class i{constructor(e,t,s){this.event=e,this.obj=t,this.method=s}}class n{constructor(){this.subscriptions=[]}subscribe(e,t,s){var n=new i(e,t,s);this.subscriptions.push(n)}fireEvent(e,t){for(let s=0;s<this.subscriptions.length;s++){const i=this.subscriptions[s];i.event==e&&i.method.call(i.obj,t)}}}class o{constructor(){this.element=null}render(){}}class r{constructor(e){this.id=uuid(),this.title=e,this.completed=!1}}class l{constructor(e){this.pubsub=e,this.todos=[]}createTodo(e){let t=new r(e,this.pubsub);this.todos.push(t),this.pubsub.fireEvent(\"create\",this.todos)}deleteTodo(e){let t=this.todos.findIndex(t=>t.id===e);this.todos.splice(t,1),this.pubsub.fireEvent(\"onDelete\",this.todos)}toggleTodo(e){let t=this.todos.find(t=>t.id===e);t.completed=!t.completed,this.pubsub.fireEvent(\"onToggle\",this.todos)}editTodo(e,t){this.todos.find(e=>e.id===t).title=e,this.pubsub.fireEvent(\"onEdit\",this.todos)}}class d extends o{constructor(e){super(),this.pubsub=e,this.form=null,this.render(),this.formListener()}formListener(){this.form.addEventListener(\"submit\",e=>{e.preventDefault();let t=e.target.firstChild.value;this.pubsub.fireEvent(\"onCreate\",t),e.target.firstChild.value=\"\"})}render(){this.form=document.createElement(\"form\"),this.form.className=\"todo-form\";let e=document.createElement(\"input\");e.type=\"text\",e.placeholder=\"What do we have to do?\",this.form.append(e);let t=document.createElement(\"button\");t.type=\"submit\",t.innerText=\"Add\",this.form.append(t),this.element=this.form}}class u extends o{constructor(e,t){super(),this.pubsub=e,this.id=t,this.checkBoxButton=null,this.deleteButton=null,this.editButton=null,this.controlsContainerDiv=null,this.editDiv=null,this.saveButton=null}handleEvent(e){this.deleteButton.addEventListener(\"click\",()=>{confirm(`Вы действительно хотите удалить задачу \"${e}\"?`),this.pubsub.fireEvent(\"delete\",this.id)}),this.checkBoxButton.addEventListener(\"click\",()=>{this.pubsub.fireEvent(\"toggle\",this.id)}),this.editButton.addEventListener(\"click\",()=>{this.controlsContainerDiv.style.display=\"none\",this.editDiv.style.display=\"\"}),this.saveButton.addEventListener(\"click\",()=>{let e={title:this.textField.value,id:this.id};this.pubsub.fireEvent(\"edit\",e)})}render(e,t){let s=document.createElement(\"section\");s.className=\"todo-list\";let i=[];this.controlsContainerDiv=document.createElement(\"div\"),this.controlsContainerDiv.className=\"todo-item\",this.controlsContainerDiv.className+=t?\" completed\":\"\",this.checkBoxButton=document.createElement(\"button\"),this.checkBoxButton.classList.add(\"checkbox\",\"icon\");let n=document.createElement(\"i\");n.className=\"material-icons\",n.innerText=t?\"check_box\":\"check_box_outline_blank\",this.checkBoxButton.prepend(n);let o=document.createElement(\"span\");o.className=\"title\",o.innerText=e;let r=document.createElement(\"div\");r.className=\"actions\";let l=document.createElement(\"button\");l.classList.add(\"edit\",\"icon\");let d=document.createElement(\"i\");d.className=\"material-icons\",d.innerText=\"create\",l.append(d),r.append(l),this.editButton=l,this.deleteButton=document.createElement(\"button\"),this.deleteButton.classList.add(\"delete\",\"icon\");let u=document.createElement(\"i\");u.className=\"material-icons\",u.innerText=\"delete\",this.deleteButton.append(u),r.append(this.deleteButton),i.push(this.checkBoxButton),i.push(o),i.push(r);for(let e=0;e<i.length;e++)this.controlsContainerDiv.append(i[e]);let c=[],h=document.createElement(\"div\");h.className=\"todo-item\",h.style.display=\"none\",this.editDiv=h;let a=document.createElement(\"input\");a.type=\"text\",a.value=e,this.textField=a;let p=document.createElement(\"div\");p.className=\"actions\",this.saveButton=document.createElement(\"button\"),this.saveButton.classList.add(\"save\",\"icon\");let m=document.createElement(\"i\");m.className=\"material-icons\",m.innerText=\"save\",this.saveButton.append(m),p.append(this.saveButton),c.push(a),c.push(p);for(let e=0;e<c.length;e++)h.append(c[e]);s.append(h),s.append(this.controlsContainerDiv),this.element=s,this.handleEvent(e)}}class c extends o{constructor(e){super(),this.element=document.createElement(\"div\"),this.pubsub=e,this.todoList=null,this.pubsub.subscribe(\"create\",this,this.render),this.pubsub.subscribe(\"onDelete\",this,this.render),this.pubsub.subscribe(\"onToggle\",this,this.render),this.pubsub.subscribe(\"onEdit\",this,this.render)}render(e){e&&(this.element.innerHTML=\"\",this.todoList=e,this.todoList.forEach(e=>{let t=new u(this.pubsub,e.id);t.render(e.title,e.completed),1==e.completed?this.element.append(t.element):this.element.prepend(t.element)}))}}s.d(t,\"default\",(function(){return h}));class h extends o{constructor(){super(),this.pubsub=new n,this.element=document.createElement(\"div\"),this.todoService=new l(this.pubsub),this.form=new d(this.pubsub),this.todoList=new c(this.pubsub),this.title=\"My 2Do\",document.getElementsByTagName(\"header\")[0].innerHTML=this.title,this.render(),this.pubsub.subscribe(\"onCreate\",this,this.createTodo),this.pubsub.subscribe(\"delete\",this,this.deleteTodo),this.pubsub.subscribe(\"toggle\",this,this.toggleTodo),this.pubsub.subscribe(\"edit\",this,this.editTodo)}render(){this.element.append(this.form.element),this.element.append(this.todoList.element)}createTodo(e){e&&this.todoService.createTodo(e)}deleteTodo(e){e&&this.todoService.deleteTodo(e)}toggleTodo(e){e&&this.todoService.toggleTodo(e)}editTodo(e){e&&this.todoService.editTodo(e.title,e.id)}}let a=new h;document.body.append(a.element)}]);","extractedComments":[]}