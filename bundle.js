!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t);var i=function e(t,n,o){r(this,e),this.event=t,this.obj=n,this.method=o},u=function(){function e(){r(this,e),this.subscriptions=[]}var t,n,u;return t=e,(n=[{key:"subscribe",value:function(e,t,n){var o=new i(e,t,n);this.subscriptions.push(o)}},{key:"fireEvent",value:function(e,t){for(var n=0;n<this.subscriptions.length;n++){var o=this.subscriptions[n];o.event==e&&o.method.call(o.obj,t)}}}])&&o(t.prototype,n),u&&o(t,u),e}();function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=null}var t,n,o;return t=e,(n=[{key:"render",value:function(){}}])&&c(t.prototype,n),o&&c(t,o),e}();var s=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),this.title=t,this.completed=!1};function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pubsub=t,this.todos=[]}var t,n,o;return t=e,(n=[{key:"createTodo",value:function(e){var t=new s(e,this.pubsub);this.todos.push(t),this.pubsub.fireEvent("create",this.todos)}},{key:"deleteTodo",value:function(e){var t=this.todos.findIndex((function(t){return t.id===e}));this.todos.splice(t,1),this.pubsub.fireEvent("onDelete",this.todos)}},{key:"toggleTodo",value:function(e){var t=this.todos.find((function(t){return t.id===e}));t.completed=!t.completed,this.pubsub.fireEvent("onToggle",this.todos)}},{key:"editTodo",value:function(e,t){this.todos.find((function(e){return e.id===t})).title=e,this.pubsub.fireEvent("onEdit",this.todos)}}])&&l(t.prototype,n),o&&l(t,o),e}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b(this,h(t).call(this))).pubsub=e,n.form=null,n.render(),n.formListener(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(o=[{key:"formListener",value:function(){var e=this;this.form.addEventListener("submit",(function(t){t.preventDefault();var n=t.target.firstChild.value;e.pubsub.fireEvent("onCreate",n),t.target.firstChild.value=""}))}},{key:"render",value:function(){this.form=document.createElement("form"),this.form.className="todo-form";var e=document.createElement("input");e.type="text",e.placeholder="What do we have to do?",this.form.append(e);var t=document.createElement("button");t.type="submit",t.innerText="Add",this.form.append(t),this.element=this.form}}])&&d(n.prototype,o),r&&d(n,r),t}(a);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=E(this,w(t).call(this))).pubsub=e,o.id=n,o.checkBoxButton=null,o.deleteButton=null,o.editButton=null,o.controlsContainerDiv=null,o.editDiv=null,o.saveButton=null,o}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(o=[{key:"handleEvent",value:function(e){var t=this;this.deleteButton.addEventListener("click",(function(){confirm('Вы действительно хотите удалить задачу "'.concat(e,'"?')),t.pubsub.fireEvent("delete",t.id)})),this.checkBoxButton.addEventListener("click",(function(){t.pubsub.fireEvent("toggle",t.id)})),this.editButton.addEventListener("click",(function(){t.controlsContainerDiv.style.display="none",t.editDiv.style.display=""})),this.saveButton.addEventListener("click",(function(){var e={title:t.textField.value,id:t.id};t.pubsub.fireEvent("edit",e)}))}},{key:"render",value:function(e,t){var n=document.createElement("section");n.className="todo-list";var o=[];this.controlsContainerDiv=document.createElement("div"),this.controlsContainerDiv.className="todo-item",this.controlsContainerDiv.className+=t?" completed":"",this.checkBoxButton=document.createElement("button"),this.checkBoxButton.classList.add("checkbox","icon");var r=document.createElement("i");r.className="material-icons",r.innerText=t?"check_box":"check_box_outline_blank",this.checkBoxButton.prepend(r);var i=document.createElement("span");i.className="title",i.innerText=e;var u=document.createElement("div");u.className="actions";var c=document.createElement("button");c.classList.add("edit","icon");var a=document.createElement("i");a.className="material-icons",a.innerText="create",c.append(a),u.append(c),this.editButton=c,this.deleteButton=document.createElement("button"),this.deleteButton.classList.add("delete","icon");var s=document.createElement("i");s.className="material-icons",s.innerText="delete",this.deleteButton.append(s),u.append(this.deleteButton),o.push(this.checkBoxButton),o.push(i),o.push(u);for(var l=0;l<o.length;l++)this.controlsContainerDiv.append(o[l]);var f=[],p=document.createElement("div");p.className="todo-item",p.style.display="none",this.editDiv=p;var d=document.createElement("input");d.type="text",d.value=e,this.textField=d;var b=document.createElement("div");b.className="actions",this.saveButton=document.createElement("button"),this.saveButton.classList.add("save","icon");var h=document.createElement("i");h.className="material-icons",h.innerText="save",this.saveButton.append(h),b.append(this.saveButton),f.push(d),f.push(b);for(var y=0;y<f.length;y++)p.append(f[y]);n.append(p),n.append(this.controlsContainerDiv),this.element=n,this.handleEvent(e)}}])&&g(n.prototype,o),r&&g(n,r),t}(a);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=k(t).call(this))||"object"!==T(r)&&"function"!=typeof r?S(o):r).element=document.createElement("div"),n.pubsub=e,n.todoList=null,n.pubsub.subscribe("create",S(n),n.render),n.pubsub.subscribe("onDelete",S(n),n.render),n.pubsub.subscribe("onToggle",S(n),n.render),n.pubsub.subscribe("onEdit",S(n),n.render),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,(o=[{key:"render",value:function(e){var t=this;e&&(this.element.innerHTML="",this.todoList=e,this.todoList.forEach((function(e){var n=new _(t.pubsub,e.id);n.render(e.title,e.completed),1==e.completed?t.element.append(n.element):t.element.prepend(n.element)})))}}])&&j(n.prototype,o),r&&j(n,r),t}(a);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return M}));var M=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(o=L(t).call(this))||"object"!==P(o)&&"function"!=typeof o?D(n):o).pubsub=new u,e.element=document.createElement("div"),e.todoService=new f(e.pubsub),e.form=new m(e.pubsub),e.todoList=new B(e.pubsub),e.title="My 2Do",document.getElementsByTagName("header")[0].innerHTML=e.title,e.render(),e.pubsub.subscribe("onCreate",D(e),e.createTodo),e.pubsub.subscribe("delete",D(e),e.deleteTodo),e.pubsub.subscribe("toggle",D(e),e.toggleTodo),e.pubsub.subscribe("edit",D(e),e.editTodo),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){this.element.append(this.form.element),this.element.append(this.todoList.element)}},{key:"createTodo",value:function(e){e&&this.todoService.createTodo(e)}},{key:"deleteTodo",value:function(e){e&&this.todoService.deleteTodo(e)}},{key:"toggleTodo",value:function(e){e&&this.todoService.toggleTodo(e)}},{key:"editTodo",value:function(e){e&&this.todoService.editTodo(e.title,e.id)}}])&&C(n.prototype,o),r&&C(n,r),t}(a),R=new M;document.body.append(R.element)}]);